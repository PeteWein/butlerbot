<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Home | Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="width: 60px; height: 20px">
        
            <a href="https://github.com/PeteWein/butlerbot" rel="noopener noreferrer" target="_blank">
                <img src="../butlerbot_logo.png" width="100%" height="100%">
            </a>
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">Home</a></h1>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
    <div class="lnb-api hidden"><h3>Modules</h3><ul><li><a href="module-advice.html">advice</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:advice_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-advice.html#~adviceApi">adviceApi</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-advice.html#~execute">execute</a></li><li><a href="module-advice.html#~getAdvice">getAdvice</a></li></ul></div></li><li><a href="module-apology.html">apology</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:apology_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-apology.html#~apology">apology</a></li><li><a href="module-apology.html#~apologyMessages">apologyMessages</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-apology.html#~execute">execute</a></li><li><a href="module-apology.html#~getApology">getApology</a></li></ul></div></li><li><a href="module-butlerbot.html">butlerbot</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:butlerbot_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-butlerbot.html#~addFields">addFields</a></li><li><a href="module-butlerbot.html#~author">author</a></li><li><a href="module-butlerbot.html#~color">color</a></li><li><a href="module-butlerbot.html#~description">description</a></li><li><a href="module-butlerbot.html#~embed">embed</a></li><li><a href="module-butlerbot.html#~footer">footer</a></li><li><a href="module-butlerbot.html#~image">image</a></li><li><a href="module-butlerbot.html#~thumbnail">thumbnail</a></li><li><a href="module-butlerbot.html#~title">title</a></li><li><a href="module-butlerbot.html#~url">url</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-butlerbot.html#~embedMessage">embedMessage</a></li><li><a href="module-butlerbot.html#~execute">execute</a></li></ul></div></li><li><a href="module-cat.html">cat</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:cat_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-cat.html#~catApi">catApi</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-cat.html#~catImage">catImage</a></li><li><a href="module-cat.html#~execute">execute</a></li></ul></div></li><li><a href="module-catfact.html">catfact</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:catfact_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-catfact.html#~catFactApi">catFactApi</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-catfact.html#~catFactApiCall">catFactApiCall</a></li><li><a href="module-catfact.html#~execute">execute</a></li></ul></div></li><li><a href="module-documentation.html">documentation</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:documentation_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-documentation.html#~execute">execute</a></li></ul></div></li><li><a href="module-dog.html">dog</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:dog_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-dog.html#~dogApi">dogApi</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-dog.html#~dogApiCall">dogApiCall</a></li><li><a href="module-dog.html#~execute">execute</a></li></ul></div></li><li><a href="module-help.html">help</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:help_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-help.html#~commands">commands</a></li><li><a href="module-help.html#~data">data</a></li><li><a href="module-help.html#~name">name</a></li><li><a href="module-help.html#~name">name</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-help.html#~execute">execute</a></li></ul></div></li><li><a href="module-insult.html">insult</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:insult_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-insult.html#~insultApi">insultApi</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-insult.html#~execute">execute</a></li><li><a href="module-insult.html#~getApology">getApology</a></li></ul></div></li><li><a href="module-introduce.html">introduce</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:introduce_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-introduce.html#~auth">auth</a></li><li><a href="module-introduce.html#~authName">authName</a></li><li><a href="module-introduce.html#~num">num</a></li><li><a href="module-introduce.html#~outputJoke">outputJoke</a></li><li><a href="module-introduce.html#~reqOne">reqOne</a></li><li><a href="module-introduce.html#~reqTwo">reqTwo</a></li><li><a href="module-introduce.html#~responseOne">responseOne</a></li><li><a href="module-introduce.html#~responseTwo">responseTwo</a></li><li><a href="module-introduce.html#~title">title</a></li><li><a href="module-introduce.html#~titleList">titleList</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-introduce.html#~execute">execute</a></li></ul></div></li><li><a href="module-joke.html">joke</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:joke_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-joke.html#~jokeApi">jokeApi</a></li><li><a href="module-joke.html#~res">res</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-joke.html#~execute">execute</a></li><li><a href="module-joke.html#~jokeApiCall">jokeApiCall</a></li></ul></div></li><li><a href="module-meme.html">meme</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:meme_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-meme.html#~reddit">reddit</a></li><li><a href="module-meme.html#~subreddit">subreddit</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-meme.html#~apiImageCrawl">apiImageCrawl</a></li><li><a href="module-meme.html#~execute">execute</a></li></ul></div></li><li><a href="module-ping.html">ping</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:ping_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-ping.html#~execute">execute</a></li></ul></div></li><li><a href="module-prune.html">prune</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:prune_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-prune.html#~amount">amount</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-prune.html#~execute">execute</a></li><li><a href="module-prune.html#~pruneChannel">pruneChannel</a></li></ul></div></li><li><a href="module-roll.html">roll</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:roll_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-roll.html#~diceArray">diceArray</a></li><li><a href="module-roll.html#~dieArray">dieArray</a></li><li><a href="module-roll.html#~dieTotal">dieTotal</a></li><li><a href="module-roll.html#~userRoll">userRoll</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-roll.html#~execute">execute</a></li></ul></div></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    









    


    <section>
        <article class="readme"><h1>Butlerbot</h1>
<h2>A simple discord bot, designed to handle simple tasks.</h2>
<p><img src="https://i.pinimg.com/600x315/02/fd/d2/02fdd20289991787f6072d43fff37166.jpg" alt=""></p>
<p><a href="https://top.gg/bot/740165717688582256"><img src="https://top.gg/api/widget/740165717688582256.svg" alt="Discord Bots"></a></p>
<p><img src="https://github.com/PeteWein/butlerbot/workflows/CodeQL/badge.svg?branch=master" alt="CodeQL">
<img src="https://img.shields.io/github/last-commit/PeteWein/butlerbot" alt="Last Commit"></p>
<p><img src="https://github.com/PeteWein/butlerbot/workflows/Test%20Coverage%20Report%20Build/badge.svg" alt="Test Coverage Report Build">
<a href="https://coveralls.io/github/PeteWein/butlerbot?branch=cleanup"><img src="https://coveralls.io/repos/github/PeteWein/butlerbot/badge.svg?branch=cleanup" alt="Coverage Status"></a>
<a href="https://www.codefactor.io/repository/github/petewein/butlerbot"><img src="https://www.codefactor.io/repository/github/petewein/butlerbot/badge" alt="CodeFactor"></a></p>
<p><img src="https://github.com/PeteWein/butlerbot/workflows/Node.js%20CI/badge.svg?branch=master" alt="Node.js CI">
<img src="https://github.com/PeteWein/butlerbot/workflows/Docker%20Image%20CI/badge.svg?branch=master" alt="Docker Image CI"></p>
<p><img src="https://img.shields.io/badge/contributions-welcome-brightgreen.svg?style=flat" alt="contributions welcome">
<a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a></p>
<hr>
<h3>Introduction</h3>
<p>Are you tired of insulting your fellow discord server members? Are you annoyed at continuously having to apologize to them? Do you want advice that may or may not be relevant to your situation? Say no more -- Butlerbot is here to help serve you in your more banal of tasks! From grabbing cute pictures of cats or dogs to telling a silly joke and breaking the ice, butlerbot is here to serve!</p>
<hr>
<h3>How to run locally</h3>
<p>First, you will need to create a new discord bot application in the <a href="https://discord.com/developers/applications">Discord developer portal</a>, which will be used to connect the discord bot that users interact with to the underlying code. Once created, you will need the <code>Client Secret</code> value (hidden in the UI by default) to inject into the discord bot. Next, you will need to create a <code>.env</code> file* in the project root with <code>BOT_TOKEN=YOUR_SECRET</code> in the file.</p>
<p>From the project root, run any of the below commands. There is a standard <code>npm start</code> command, which is identical to a standard deployment run; there is also a <code>npm run local-dev</code> option, which will automatically reload the application on any code changes. This is the recommended approach for local development, as it will greatly speed up development by eliminating the need to stop and restart the application during the process.</p>
<pre class="prettyprint source"><code># (recommended) Start discord bot in local development mode
npm run local-dev

# the underlying node cli command
nodemon ./src/bot.js

# Start discord bot using the same method as a standard deployment
npm start
# underlying npm command
node ./src/bot.js
</code></pre>
<p>This will start the discord bot from the command line.</p>
<p>*<em>NOTE: there is a <code>.env.example</code> file to assist with the variable name/format.</em></p>
<hr>
<h3>Running from a docker container/image</h3>
<p>There is a Dockerfile that can be used to build the bot as well. The main thing here is that, by default, it won't have the bot token required to run (which lives in <code>.env</code>). You will need to inject the token into a <code>.env</code> file within the container after it is deployed. However, the container itself should work and exposts the default 80/443 ports.</p>
<hr>
<h3>Linting</h3>
<p>You can also run linting on the source code, which can assist with syntax errors/code style enforcement and is useful in the CI/CD pipeline. This can be from the project root with either fo the below commands:</p>
<pre class="prettyprint source"><code>npm run lint

eslint ./src/*.js ./src/commands/*.js
</code></pre>
<hr>
<h3>Unit Tests</h3>
<p>There are a few unit tests built into the bot. These live in the <code>test</code> directory in <code>commands.test.js</code>. Although there is not 100% code coverage, the tests do cover a range of bot functionality aspects and flows. For the commands that do have unit tests, there is nearly 100% code coverage. Currently, jest is used as the testing framework.</p>
<p>Running the tests are fairly straightforward. From the project root, run either of the below commands:</p>
<pre class="prettyprint source"><code># easy npm usage
npm test

# full jest cli option
del-cli ./docs/coverage && jest ./test --detectOpenHandles --forceExit --coverage --runInBand --no-cache --coverageDirectory ./docs/coverage
</code></pre>
<p>In addition to performing all of the unit tests, this test suite will also produce a coverage directory that reports the results of the test. These can be found in the <code>coverage/</code> directory at the project root. You can also view a report visualization at <code>file:///&lt;PATH&gt;/&lt;TO&gt;/&lt;REPO&gt;/butlerbot/docs/coverage/lcov-report/index.html</code>.</p>
<p>All code coverage is automatically run/deployed and can be found via. the <a href="coverage/lcov-report/index.html">Jest code coverage report here</a></p>
<p>Due to the fact that there is no simple unit testing/mock framework for discord bots, this <a href="https://stackoverflow.com/questions/60916450/jest-testing-discord-bot-commands">stackoverflow answer</a> was the basis for the unit testing.</p>
<hr>
<h3>Integration Tests</h3>
<p>Unfortunately I haven't found an &quot;easy&quot; way to do integration testing and confirm everything is working before actually deploying. Right now, I've set up a development and staging discord server, as well as a butlerbot-dev bot (within the <a href="https://discord.com/developers/applications">discord developer portal</a>, similar to when the bot is first created). I updated the <code>.env</code> when deploying locally to use the dev <code>BOT_TOKEN</code>, which allows me to deploy the bot locally and make changes before pushing to github and subsequently the production environment. The development server is focused on making/testing the changes themselves, where the staging is confirming the changes in behavior between the production and development versions of the code.</p>
<hr>
<h3>Documentation</h3>
<p>Although this is a simple landing page, detailed documentation can be found via. the <a href="./docs/documentation/index.html">auto-generated docs here</a>. These were created using JSDoc.</p>
<p>However, if you want to generate the documantation locally, you can use the following commands:</p>
<pre class="prettyprint source"><code># (recommended) npm cli option
npm run doc

# cli option without npm
jsdoc -d doc --configure jsconf.json ./src/bot.js
</code></pre>
<p>NOTE: this documentation will be automatically regenerated and redeployed when the code is merged to master. The above code will allow you to check and confirm any changes to the code/annotations/etc. are working as intended.</p>
<hr>
<h3>External Documentation</h3>
<p>If you are looking to create your own discord bot, below are the guides I found useful:</p>
<p>https://discordjs.guide/</p>
<p>https://medium.com/@mason.spr/hosting-a-discord-js-bot-for-free-using-heroku-564c3da2d23f</p>
<p>https://github.com/jsdoc/jsdoc</p>
<p>https://github.com/andstor/jsdoc-action</p>
<hr>
<h3>Want butlerbot in your discord?</h3>
<p><a href="https://discord.com/api/oauth2/authorize?client_id=740165717688582256&amp;permissions=8&amp;scope=bot">Here</a> is the invite link that will give Butlerbot the necessary bot permissions.</p>
<p>Alternatively, please feel free to visit Butlerbot's <a href="https://petewein.github.io/butlerbot/">homepage</a> or <a href="https://top.gg/bot/740165717688582256">top.gg</a> page.</p>
<hr></article>
    </section>






</div>

<footer>
    <img class="logo" src="../butlerbot_logo.png" style="width: 60px; height: 20px">
    <div class="footer-text">Butlerbot's Documentation v1.0.0</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = 'package:undefined_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>